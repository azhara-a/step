const darkSwitch = document.getElementById("darkSwitch");

function setDarkSwitchState() {
    const isDarkThemeSet = null !== localStorage.getItem("darkSwitch") &&
        "dark" === localStorage.getItem("darkSwitch");
    darkSwitch.checked = isDarkThemeSet, isDarkThemeSet ?
        document.body.setAttribute("data-theme", "dark") :
        document.body.removeAttribute("data-theme")
}

function resetDarkSwitchState() {
    darkSwitch.checked ?
        (document.body.setAttribute("data-theme", "dark"),
            localStorage.setItem("darkSwitch", "dark"))
        : (document.body.removeAttribute("data-theme"),
            localStorage.removeItem("darkSwitch"))
}

window.addEventListener("load", () => {
    darkSwitch && (setDarkSwitchState(),
        darkSwitch.addEventListener("change", () => { resetDarkSwitchState() }))
});
